<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overdraft Design Doc</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="testudo-bank-overdraft-feature">Testudo Bank Overdraft Feature</h1>
<p><em>Owner: Adithya Solai (<a href="mailto:adithyasolai7@gmail.com">adithyasolai7@gmail.com</a>)</em></p>
<h2 id="problem-statement">Problem Statement</h2>
<p>Customers of Testudo Bank are currently limited to only withdrawing money that they have previously deposited. Customers would benefit from a Testudo Bank service that enables them to withdraw extra money on credit beyond their account balance (to pay off unexpected expenses, for example). This service would also create a new revenue stream for Testudo Bank because we can charge interest on loaned money.</p>
<h2 id="solution-requirements">Solution Requirements</h2>
<ul>
<li>Customers should be able to withdraw up to <strong>$1000</strong> beyond their account balance on a credit loan from Testudo Bank.</li>
<li>Customers should have a place on the TestudoBank application to pay back the credit loan.</li>
<li>Customers should be charged a <strong>2% interest fee</strong> on any money loaned from Testudo Bank</li>
<li>Testudo Bank should provide a way for both customers and the bank to audit a customer’s re-payment history of all credit loans.</li>
</ul>
<h2 id="proposed-solution">Proposed Solution</h2>
<p>The proposed solution is an <strong>overdraft</strong> feature that allows customers to withdraw beyond their balance using the existing withdraw form and pay back the credit loan using the existing deposit form. Customers will also be provided a re-payment log with timestamps in the existing <code>account_info</code> page.</p>
<p>This solution was chosen because it re-uses existing pages in the application, and only requires slight changes to the underlying MySQL DB.</p>
<p>Pro/Con of all approaches considered:</p>
<p><strong>Overdraft Approach</strong><br>
<em>(Approach already described above.)</em></p>
<p>Pros:</p>
<ul>
<li>No new pages/forms are added. Existing pages and forms are minimally changed.
<ul>
<li>Keeps the customer experience the same as what they are used to. <em>(Some text needs to be added to existing pages to describe the overdraft feature, display the overdraft balance, and show a re-payment history.)</em></li>
<li>Simplifies development since only the logic in existing Controller <code>Post</code> handlers needs to be modified.</li>
</ul>
</li>
<li>Only slight changes to the MySQL DB Schema need to be made (a new <code>OverdraftBalance</code> column in <code>Customers</code> table, and a new table to store re-payment logs).</li>
<li>A <strong>2-way door</strong> for the Testudo Bank business. Since this approach mostly recycles existing components and keeps the customer experience largely the same, this change can easily be rolled back or re-factored in the future.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Might be unintuitive to some customers because most banks traditionally offer credit loans as part of a credit account separate from a debit account, and this approaches blends the credit loan feature with a debit account.</li>
<li>This approach might be short-lived if TestudoBank moves to a credit/debit paradigm in the near future. This feature will conflict with the credit borrowing offered in a credit account, and might have to be deprecated.</li>
</ul>
<p><strong>Debit &amp; Credit Account Approach</strong><br>
This approach re-classifies the existing customer accounts as <strong>Debit</strong> accounts (where customers can only withdraw as much money as they previously deposited). Customers will also be eligible to open a <strong>Credit</strong> account where the balance indicates how much the customer has borrowed from the bank and needs to pay back.</p>
<p>Pros:</p>
<ul>
<li>Follows the credit/debit paradigm used by most banks. More intuitive for customers familiar with other bank applications.</li>
<li>Prepares the codebase for more robust credit account features in the future.</li>
<li>Similar MySQL DB Schema changes.
<ul>
<li>A new table will be added to track credit account re-payment history (just like the overdraft approach).</li>
<li>A new <code>CreditBalance</code> column needs to be added to the <code>Customers</code> table to track the credit account’s balance, and the existing <code>Balance</code> column should be re-named to <code>DebitBalance</code>.</li>
</ul>
</li>
</ul>
<p>Cons:</p>
<ul>
<li>A credit/debit account separation is a <strong>1-way door</strong> for the TestudoBank business.
<ul>
<li>Once customers start using debit and credit accounts, we can’t rollback that separation in the future.</li>
<li>The scope of a credit/debit account separation overshadows the original problem statement of trying to give customers a way to borrow money on credit. There should be more discussion and more customer pain-points that would be solved before going through this 1-way door.</li>
</ul>
</li>
<li>More complex to develop than the overdraft approach.
<ul>
<li>New pages may need to be made to show credit account info separately from the debit account.</li>
<li>A new form needs to be added to allow customers to transfer money from their debit account to pay off the credit account balance.</li>
</ul>
</li>
</ul>
<h2 id="technical-architecture-overdraft-approach">Technical Architecture (Overdraft Approach)</h2>
<p><strong>MVC Logic</strong><br>
Customer Withdraws Beyond Balance<br>
<img src="https://i.ibb.co/NT1fBfk/Overdraft-Feature-Design-Withdraw.png" alt=""></p>
<p>Customer Makes an Overdraft Repayment<br>
<img src="https://i.ibb.co/c30XZ2L/Overdraft-Feature-Design-Repay-drawio.png" alt=""></p>
<p><strong>MySQL DB Schema</strong><br>
<img src="https://i.ibb.co/cxyJpMF/Testudo-Bank-Overdraft-DB-Schema.png" alt="Testudo Bank Overdraft DB Schema"></p>
<ul>
<li><code>CustomerID</code> is a primary key for the <code>Customers</code> table that can be used as a foreign key in the <code>OverdraftLogs</code> and <code>Passwords</code> table.
<ul>
<li><code>CustomerID</code> is also a primary key in the <code>Passwords</code> table.</li>
<li><code>CustomerID</code> is not a primary key in the <code>OverdraftLogs</code> table since each row in that table represents a single time a customer paid back some (or all) of their overdraft balance. The same <code>CustomerID</code> can be in numerous rows in the <code>OverdraftLogs</code> table since customers can pay back their overdraft balance over multiple payments.</li>
</ul>
</li>
</ul>
</div>
</body>

</html>
